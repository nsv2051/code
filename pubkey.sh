#!/bin/sh

mv .ssh .ssh_old
mkdir .ssh
cat > .ssh/authorized_keys << EOF
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAuT63Rq9NpIleAgjiFCJC3K48pTPDWAL40p4p8NYDsyIqmYEjB9Bnr+WDXnzIPb3sqfo9wonavws/McNRaVYXnhHoZgNloYwqgiotvROQMNaHlZg1qXoFQ7Rbp7Y1k3iqSmfByh4lluYgS1dKANdh89xUJVW8LuZsZyYrgyYJ34OX8cGXgKiTl2j0CQh19yzO3b47R7OvX9iUQ+sDla7glYkEPUx7vwp+FMHSMXAzoFN+ONbjder1rxX/2ILIhiLZgu6F3EX4rtQCS8e4LzIwbEYjVIty012zEFms9MGpAh3e1vZvCVlpgXpJh1YI/xJ8YED25+6vUKpNBQiXohORAw==
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCo3j60agbaTXHgrlomRCbfeIadeYq9y9bwDR6jof6bp37AEbaKgYE5mt31CxLtVmDgRTG8HpT2Jm794JLuTDiPVP2moNGAn+BYehostv0H07iZ5r8nJBRdDL4M8GESyoOAGnnRmw7hjesqwHiBDBcNY/vZd7me90jgKskACfVrzYPP/uRbwulW9P9HVY7p8SOFkpdQg4UTymcgSp7S6f0XWub1kQ5+4G1z9pWg9QIXIXOEFFtsv7bIxR1zwHRfK3tw8ERQN8A9VGmqx1ZLTOSswM+cT+RD3l7fUV48mC9p04B0emdSSqWyv/35DPa6ujnc6uXPORklE1cNQult5swdKy/s2YzjDqfh70FrOYUYaxcdwGLsJhStClUrx0QXRhqStdRZjHZAR7N+PeXqrR7enuilgpaaENWdFkWA5So3kJHY3/ASWXfez7JSc6/4LUTKybaCNE6saLJ+mxWSG/ijxLeJO/RjLtF1IqNILjJ2HefkBZpRYHI6JHkXqXW5V80=
EOF
chmod 600 .ssh/authorized_keys
chmod 700 .ssh
sed -i 's/#PubkeyAuthentication yes/PubkeyAuthentication yes/g' /etc/ssh/sshd_config
sed -i 's/#AuthorizedKeysFile/AuthorizedKeysFile/g' /etc/ssh/sshd_config
sed -i 's/PasswordAuthentication yes/PasswordAuthentication no/g' /etc/ssh/sshd_config
systemctl restart sshd
